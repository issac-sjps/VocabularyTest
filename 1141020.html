<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–®å­—å­¸ç¿’éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Microsoft JhengHei', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .bounce {
            animation: bounce 0.6s ease-in-out;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .letter-card {
            cursor: grab;
            user-select: none;
            transition: all 0.2s ease;
        }
        .letter-card:hover {
            transform: scale(1.05);
        }
        .letter-card.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
            cursor: grabbing;
        }
        .answer-slot {
            min-width: 40px;
            min-height: 40px;
            transition: all 0.2s ease;
        }
        .drop-zone {
            border-color: #3b82f6 !important;
            background-color: #dbeafe !important;
        }
    </style>
</head>
<body class="min-h-full bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500">
    <div class="min-h-full flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-8">
            
            <!-- ä¸»é¸å–® -->
            <div id="mainMenu" class="text-center fade-in">
                <h1 class="text-4xl font-bold text-gray-800 mb-2">ğŸ¯ å–®å­—å­¸ç¿’éŠæˆ² 1141020(ä¸€)</h1>
                <p class="text-gray-600 mb-8">æŒ‘æˆ°ä¸‰å€‹éšæ®µï¼ŒæŒæ¡è‹±æ–‡å–®å­—ï¼</p>
                
                <div class="space-y-4">
                    <button onclick="showGameIntro()" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-4 px-8 rounded-xl hover:from-green-500 hover:to-blue-600 transform hover:scale-105 transition-all duration-200 shadow-lg">
                        ğŸš€ é–‹å§‹éŠæˆ²
                    </button>
                    
                    <button onclick="showTeacherLogin()" class="w-full bg-gradient-to-r from-purple-400 to-pink-500 text-white font-bold py-4 px-8 rounded-xl hover:from-purple-500 hover:to-pink-600 transform hover:scale-105 transition-all duration-200 shadow-lg">
                        ğŸ‘¨â€ğŸ« æ•™å¸«ç®¡ç†å€
                    </button>
                </div>
            </div>

            <!-- æ•™å¸«ç™»å…¥ -->
            <div id="teacherLogin" class="hidden text-center fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">ğŸ” æ•™å¸«ç™»å…¥</h2>
                <div class="max-w-md mx-auto">
                    <input type="password" id="teacherPassword" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" class="w-full p-4 border-2 border-gray-300 rounded-xl mb-4 text-center text-lg focus:border-blue-500 focus:outline-none">
                    <div class="space-y-3">
                        <button onclick="checkTeacherPassword()" class="w-full bg-blue-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-600 transition-colors">
                            ç™»å…¥
                        </button>
                        <button onclick="showMainMenu()" class="w-full bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition-colors">
                            è¿”å›
                        </button>
                    </div>
                </div>
            </div>

            <!-- æ•™å¸«ç®¡ç†å€ -->
            <div id="teacherPanel" class="hidden fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">ğŸ‘¨â€ğŸ« æ•™å¸«ç®¡ç†å€</h2>
                
                <div class="bg-gray-50 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-700 mb-4">ğŸ“š ç›®å‰å–®å­—åº«</h3>
                    <div class="grid grid-cols-1 gap-3">
                        <div class="bg-white p-4 rounded-lg border hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="font-bold text-blue-600 text-lg">balcony</span> - é™½å°
                                </div>
                                <button onclick="speakWord('balcony')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm transition-colors flex items-center gap-1">
                                    ğŸ”Š ç™¼éŸ³
                                </button>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="font-bold text-blue-600 text-lg">band</span> - æ¨‚åœ˜
                                </div>
                                <button onclick="speakWord('band')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm transition-colors flex items-center gap-1">
                                    ğŸ”Š ç™¼éŸ³
                                </button>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="font-bold text-blue-600 text-lg">barbecue</span> - çƒ¤è‚‰
                                </div>
                                <button onclick="speakWord('barbecue')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm transition-colors flex items-center gap-1">
                                    ğŸ”Š ç™¼éŸ³
                                </button>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="font-bold text-blue-600 text-lg">bath</span> - æ´—æ¾¡
                                </div>
                                <button onclick="speakWord('bath')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm transition-colors flex items-center gap-1">
                                    ğŸ”Š ç™¼éŸ³
                                </button>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="font-bold text-blue-600 text-lg">bean</span> - è±†
                                </div>
                                <button onclick="speakWord('bean')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm transition-colors flex items-center gap-1">
                                    ğŸ”Š ç™¼éŸ³
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-blue-50 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-700 mb-4">ğŸ“Š éŠæˆ²çµ±è¨ˆ</h3>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div class="bg-white p-4 rounded-lg">
                            <div class="text-2xl font-bold text-green-600" id="stage1Stats">0</div>
                            <div class="text-sm text-gray-600">éšæ®µä¸€å®Œæˆæ¬¡æ•¸</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <div class="text-2xl font-bold text-blue-600" id="stage2Stats">0</div>
                            <div class="text-sm text-gray-600">éšæ®µäºŒå®Œæˆæ¬¡æ•¸</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <div class="text-2xl font-bold text-purple-600" id="stage3Stats">0</div>
                            <div class="text-sm text-gray-600">éšæ®µä¸‰å®Œæˆæ¬¡æ•¸</div>
                        </div>
                    </div>
                </div>

                <button onclick="showMainMenu()" class="w-full bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition-colors">
                    è¿”å›ä¸»é¸å–®
                </button>
            </div>

            <!-- éŠæˆ²èªªæ˜ -->
            <div id="gameIntro" class="hidden text-center fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">ğŸ¯ éŠæˆ²èªªæ˜</h2>
                
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 mb-6">
                    <div class="space-y-4 text-left">
                        <div class="flex items-center gap-3">
                            <div class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">1</div>
                            <div>
                                <div class="font-bold text-gray-800">éšæ®µä¸€ï¼šè‹±æ–‡é¸ä¸­æ–‡</div>
                                <div class="text-gray-600 text-sm">çœ‹è‹±æ–‡å–®å­—ï¼Œé¸æ“‡æ­£ç¢ºçš„ä¸­æ–‡æ„æ€ï¼ˆ5é¡Œï¼‰</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">2</div>
                            <div>
                                <div class="font-bold text-gray-800">éšæ®µäºŒï¼šä¸­æ–‡é¸è‹±æ–‡</div>
                                <div class="text-gray-600 text-sm">çœ‹ä¸­æ–‡æ„æ€ï¼Œé¸æ“‡æ­£ç¢ºçš„è‹±æ–‡å–®å­—ï¼ˆ5é¡Œï¼‰</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">3</div>
                            <div>
                                <div class="font-bold text-gray-800">éšæ®µä¸‰ï¼šæ‹¼å­—æ¸¬é©—</div>
                                <div class="text-gray-600 text-sm">çœ‹ä¸­æ–‡æ„æ€ï¼Œè¼¸å…¥æ­£ç¢ºçš„è‹±æ–‡æ‹¼å­—ï¼ˆ5é¡Œï¼‰</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6">
                    <div class="text-yellow-800 font-bold mb-2">ğŸ“ æ³¨æ„äº‹é …</div>
                    <div class="text-yellow-700 text-sm">
                        â€¢ ç¸½å…±15é¡Œï¼Œå¿…é ˆä¾åºå®Œæˆä¸‰å€‹éšæ®µ<br>
                        â€¢ æ¯é¡Œç­”å°å¾—1åˆ†ï¼Œæœ€å¾Œæœƒé¡¯ç¤ºæ­£ç¢ºç‡<br>
                        â€¢ ç­”éŒ¯å¾Œæœƒé¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
                    </div>
                </div>
                
                <div class="space-y-4">
                    <button onclick="startGame()" class="w-full bg-gradient-to-r from-green-400 to-purple-500 text-white font-bold py-4 px-8 rounded-xl hover:from-green-500 hover:to-purple-600 transform hover:scale-105 transition-all duration-200 shadow-lg">
                        ğŸš€ é–‹å§‹æŒ‘æˆ°
                    </button>
                    
                    <button onclick="showMainMenu()" class="w-full bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition-colors">
                        è¿”å›ä¸»é¸å–®
                    </button>
                </div>
            </div>

            <!-- éŠæˆ²é€²è¡Œä¸­ -->
            <div id="gameArea" class="hidden fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 id="stageTitle" class="text-2xl font-bold text-gray-800"></h2>
                    <div class="text-right">
                        <div class="text-lg font-bold text-blue-600">
                            é¡Œç›® <span id="questionNumber">1</span>/15
                        </div>
                        <div class="text-sm text-green-600 font-bold">
                            æ­£ç¢ºç‡ï¼š<span id="currentAccuracy">0%</span>
                        </div>
                    </div>
                </div>
                
                <!-- é€²åº¦æ¢ -->
                <div class="mb-6">
                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                        <span>é€²åº¦</span>
                        <span id="progressText">éšæ®µä¸€</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div id="progressBar" class="bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full transition-all duration-500" style="width: 6.67%"></div>
                    </div>
                </div>

                <div class="bg-gray-50 rounded-xl p-6 mb-6 text-center">
                    <div class="flex items-center justify-center gap-4 mb-4">
                        <div id="questionText" class="text-3xl font-bold text-gray-800"></div>
                        <button id="pronunciationBtn" onclick="speakCurrentWord()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    
                    <!-- é¸æ“‡é¡Œé¸é … -->
                    <div id="choiceOptions" class="space-y-3">
                        <div class="choice-container flex items-center gap-3">
                            <button class="choice-btn flex-1 bg-white border-2 border-gray-300 text-gray-800 font-bold py-4 px-6 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all duration-200" onclick="selectChoice(0)"></button>
                            <button class="choice-sound-btn bg-gray-200 hover:bg-gray-300 text-gray-600 px-3 py-2 rounded-lg transition-colors" onclick="speakChoiceWord(0)">ğŸ”Š</button>
                        </div>
                        <div class="choice-container flex items-center gap-3">
                            <button class="choice-btn flex-1 bg-white border-2 border-gray-300 text-gray-800 font-bold py-4 px-6 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all duration-200" onclick="selectChoice(1)"></button>
                            <button class="choice-sound-btn bg-gray-200 hover:bg-gray-300 text-gray-600 px-3 py-2 rounded-lg transition-colors" onclick="speakChoiceWord(1)">ğŸ”Š</button>
                        </div>
                        <div class="choice-container flex items-center gap-3">
                            <button class="choice-btn flex-1 bg-white border-2 border-gray-300 text-gray-800 font-bold py-4 px-6 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all duration-200" onclick="selectChoice(2)"></button>
                            <button class="choice-sound-btn bg-gray-200 hover:bg-gray-300 text-gray-600 px-3 py-2 rounded-lg transition-colors" onclick="speakChoiceWord(2)">ğŸ”Š</button>
                        </div>
                        <div class="choice-container flex items-center gap-3">
                            <button class="choice-btn flex-1 bg-white border-2 border-gray-300 text-gray-800 font-bold py-4 px-6 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all duration-200" onclick="selectChoice(3)"></button>
                            <button class="choice-sound-btn bg-gray-200 hover:bg-gray-300 text-gray-600 px-3 py-2 rounded-lg transition-colors" onclick="speakChoiceWord(3)">ğŸ”Š</button>
                        </div>
                    </div>

                    <!-- æ‹¼å­—æ‹–æ‹‰ -->
                    <div id="spellingInput" class="hidden">
                        <div class="mb-4">
                            <div class="text-lg font-bold text-gray-700 mb-1">é»æ“Šæˆ–æ‹–æ‹‰å­—æ¯å¡ç‰‡ä¾†æ‹¼å‡ºå–®å­—ï¼š</div>
                            <div class="text-sm text-blue-600 mb-1">ğŸ’¡ æç¤ºï¼šé€™å€‹å–®å­—ç¸½å…±æœ‰ <span id="letterCount" class="font-bold">0</span> å€‹å­—æ¯</div>
                            <div class="text-sm text-green-600 font-bold mb-3">ç›®å‰å·²é¸ï¼š<span id="selectedCount" class="font-bold">0</span> å€‹å­—æ¯</div>
                            <!-- ç­”æ¡ˆå€åŸŸ -->
                            <div id="answerArea" class="min-h-16 bg-white border-2 border-dashed border-gray-300 rounded-xl p-4 mb-4 flex items-center justify-center gap-2 flex-wrap">
                                <div class="text-gray-400">å°‡å­—æ¯å¡ç‰‡æ‹–æ‹‰åˆ°é€™è£¡</div>
                            </div>
                            <!-- å­—æ¯å¡ç‰‡å€åŸŸ -->
                            <div class="text-sm text-gray-600 mb-2">å¯ç”¨å­—æ¯ï¼š</div>
                            <div id="letterCards" class="flex flex-wrap gap-2 justify-center mb-4">
                                <!-- å­—æ¯å¡ç‰‡æœƒå‹•æ…‹ç”Ÿæˆ -->
                            </div>
                            <div class="flex gap-3 justify-center">
                                <button onclick="clearAnswer()" class="bg-gray-500 text-white font-bold py-2 px-6 rounded-xl hover:bg-gray-600 transition-colors">
                                    æ¸…é™¤
                                </button>
                                <button onclick="checkSpelling()" class="bg-blue-500 text-white font-bold py-2 px-6 rounded-xl hover:bg-blue-600 transition-colors">
                                    ç¢ºèªç­”æ¡ˆ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="feedback" class="text-center mb-4 text-lg font-bold"></div>
                
                <button id="nextBtn" onclick="nextQuestion()" class="hidden w-full bg-green-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-600 transition-colors">
                    ä¸‹ä¸€é¡Œ (æˆ–æŒ‰ç©ºç™½éµ)
                </button>
            </div>

            <!-- çµæœé é¢ -->
            <div id="resultArea" class="hidden text-center fade-in">
                <div class="mb-6">
                    <div id="resultEmoji" class="text-6xl mb-4">ğŸ‰</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">æŒ‘æˆ°å®Œæˆï¼</h2>
                    
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 mb-6">
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-2xl font-bold text-blue-600" id="finalScore">15/15</div>
                                <div class="text-sm text-gray-600">ç¸½å¾—åˆ†</div>
                            </div>
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-2xl font-bold text-green-600" id="accuracyRate">100%</div>
                                <div class="text-sm text-gray-600">æ­£ç¢ºç‡</div>
                            </div>
                        </div>
                        
                        <div class="text-lg font-bold text-gray-700 mb-2" id="resultMessage">å¤ªæ£’äº†ï¼å…¨éƒ¨ç­”å°ï¼</div>
                        <div class="text-sm text-gray-600">
                            éšæ®µä¸€ï¼š<span id="stage1Result">5/5</span> | 
                            éšæ®µäºŒï¼š<span id="stage2Result">5/5</span> | 
                            éšæ®µä¸‰ï¼š<span id="stage3Result">5/5</span>
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <button onclick="restartGame()" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-4 px-8 rounded-xl hover:from-green-500 hover:to-blue-600 transform hover:scale-105 transition-all duration-200 shadow-lg">
                        ğŸ”„ å†æ¬¡æŒ‘æˆ°
                    </button>
                    <button onclick="showMainMenu()" class="w-full bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition-colors">
                        è¿”å›ä¸»é¸å–®
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å–®å­—è³‡æ–™
        const vocabulary = [
            { english: 'balcony', chinese: 'é™½å°' },
            { english: 'band', chinese: 'æ¨‚åœ˜' },
            { english: 'barbecue', chinese: 'çƒ¤è‚‰' },
            { english: 'bath', chinese: 'æ´—æ¾¡' },
            { english: 'bean', chinese: 'è±†' }
        ];

        // éŠæˆ²ç‹€æ…‹
        let currentStage = 1;
        let currentQuestion = 0;
        let totalQuestions = 15;
        let score = 0;
        let stageScores = { stage1: 0, stage2: 0, stage3: 0 };
        let questions = [];
        let currentChoices = [];
        let currentAnswer = [];
        let questionAnswered = []; // è¨˜éŒ„æ¯é¡Œæ˜¯å¦å·²ç¶“ç­”éï¼ˆé˜²æ­¢é‡è¤‡è¨ˆåˆ†ï¼‰
        let gameStats = {
            stage1: parseInt(localStorage.getItem('stage1Stats') || '0'),
            stage2: parseInt(localStorage.getItem('stage2Stats') || '0'),
            stage3: parseInt(localStorage.getItem('stage3Stats') || '0')
        };

        // åˆå§‹åŒ–
        function init() {
            updateStatsDisplay();
        }

        // é¡¯ç¤ºä¸»é¸å–®
        function showMainMenu() {
            hideAllScreens();
            document.getElementById('mainMenu').classList.remove('hidden');
        }

        // é¡¯ç¤ºæ•™å¸«ç™»å…¥
        function showTeacherLogin() {
            hideAllScreens();
            document.getElementById('teacherLogin').classList.remove('hidden');
            document.getElementById('teacherPassword').value = '';
        }

        // æª¢æŸ¥æ•™å¸«å¯†ç¢¼
        function checkTeacherPassword() {
            const password = document.getElementById('teacherPassword').value;
            if (password === '000000') {
                hideAllScreens();
                document.getElementById('teacherPanel').classList.remove('hidden');
                updateStatsDisplay();
            } else {
                document.getElementById('teacherPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('teacherPassword').classList.remove('shake');
                }, 500);
                document.getElementById('teacherPassword').value = '';
            }
        }

        // æ›´æ–°çµ±è¨ˆé¡¯ç¤º
        function updateStatsDisplay() {
            document.getElementById('stage1Stats').textContent = gameStats.stage1;
            document.getElementById('stage2Stats').textContent = gameStats.stage2;
            document.getElementById('stage3Stats').textContent = gameStats.stage3;
        }

        // é–‹å§‹éŠæˆ²
        function startGame() {
            // é‡ç½®éŠæˆ²ç‹€æ…‹
            currentStage = 1;
            currentQuestion = 0;
            score = 0;
            stageScores = { stage1: 0, stage2: 0, stage3: 0 };
            questionAnswered = new Array(15).fill(false); // åˆå§‹åŒ–æ‰€æœ‰é¡Œç›®ç‚ºæœªç­”é
            generateAllQuestions();
            hideAllScreens();
            document.getElementById('gameArea').classList.remove('hidden');
            showQuestion();
        }

        // é¡¯ç¤ºéŠæˆ²èªªæ˜
        function showGameIntro() {
            hideAllScreens();
            document.getElementById('gameIntro').classList.remove('hidden');
        }

        // é‡æ–°é–‹å§‹éŠæˆ²
        function restartGame() {
            startGame();
        }

        // ç”Ÿæˆæ‰€æœ‰é¡Œç›®
        function generateAllQuestions() {
            questions = [];
            
            // éšæ®µä¸€ï¼šè‹±æ–‡é¸ä¸­æ–‡ (5é¡Œ)
            const stage1Questions = [...vocabulary].sort(() => Math.random() - 0.5);
            for (let i = 0; i < 5; i++) {
                questions.push({
                    ...stage1Questions[i],
                    stage: 1,
                    type: 'choice'
                });
            }
            
            // éšæ®µäºŒï¼šä¸­æ–‡é¸è‹±æ–‡ (5é¡Œ)
            const stage2Questions = [...vocabulary].sort(() => Math.random() - 0.5);
            for (let i = 0; i < 5; i++) {
                questions.push({
                    ...stage2Questions[i],
                    stage: 2,
                    type: 'choice'
                });
            }
            
            // éšæ®µä¸‰ï¼šæ‹¼å­—æ¸¬é©— (5é¡Œ)
            const stage3Questions = [...vocabulary].sort(() => Math.random() - 0.5);
            for (let i = 0; i < 5; i++) {
                questions.push({
                    ...stage3Questions[i],
                    stage: 3,
                    type: 'spelling'
                });
            }
        }

        // é¡¯ç¤ºé¡Œç›®
        function showQuestion() {
            const question = questions[currentQuestion];
            currentStage = question.stage;
            
            // æ›´æ–°é¡Œç›®ç·¨è™Ÿå’Œé€²åº¦
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('feedback').textContent = '';
            document.getElementById('nextBtn').classList.add('hidden');
            
            // æ›´æ–°æ­£ç¢ºç‡é¡¯ç¤º
            if (currentQuestion === 0) {
                document.getElementById('currentAccuracy').textContent = '0%';
            } else {
                updateAccuracyDisplay();
            }
            
            // æ›´æ–°éšæ®µæ¨™é¡Œå’Œé€²åº¦æ–‡å­—
            const titles = {
                1: 'ğŸ¯ éšæ®µä¸€ï¼šè‹±æ–‡é¸ä¸­æ–‡',
                2: 'ğŸ¯ éšæ®µäºŒï¼šä¸­æ–‡é¸è‹±æ–‡',
                3: 'âœï¸ éšæ®µä¸‰ï¼šæ‹¼å­—æ¸¬é©—'
            };
            document.getElementById('stageTitle').textContent = titles[currentStage];
            document.getElementById('progressText').textContent = `éšæ®µ${currentStage === 1 ? 'ä¸€' : currentStage === 2 ? 'äºŒ' : 'ä¸‰'}`;
            
            // æ›´æ–°é€²åº¦æ¢
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // æ ¹æ“šéšæ®µé¡¯ç¤ºä¸åŒé¡è‰²çš„é€²åº¦æ¢
            const progressBar = document.getElementById('progressBar');
            if (currentStage === 1) {
                progressBar.className = 'bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full transition-all duration-500';
            } else if (currentStage === 2) {
                progressBar.className = 'bg-gradient-to-r from-blue-400 to-blue-600 h-3 rounded-full transition-all duration-500';
            } else {
                progressBar.className = 'bg-gradient-to-r from-purple-400 to-purple-600 h-3 rounded-full transition-all duration-500';
            }

            if (question.type === 'choice') {
                // é¸æ“‡é¡Œ
                if (currentStage === 1) {
                    // è‹±æ–‡é¸ä¸­æ–‡
                    document.getElementById('questionText').textContent = question.english;
                    const choices = generateChoices(question.chinese, 'chinese');
                    currentChoices = choices;
                    setupChoiceButtons(choices);
                } else {
                    // ä¸­æ–‡é¸è‹±æ–‡
                    document.getElementById('questionText').textContent = question.chinese;
                    const choices = generateChoices(question.english, 'english');
                    currentChoices = choices;
                    setupChoiceButtons(choices);
                }
                document.getElementById('choiceOptions').classList.remove('hidden');
                document.getElementById('spellingInput').classList.add('hidden');
                
            } else {
                // æ‹¼å­—æ¸¬é©—
                document.getElementById('questionText').textContent = question.chinese;
                document.getElementById('choiceOptions').classList.add('hidden');
                document.getElementById('spellingInput').classList.remove('hidden');
                setupSpellingCards(question.english);
            }
        }
        
        // è¨­ç½®é¸æ“‡é¡ŒæŒ‰éˆ•
        function setupChoiceButtons(choices) {
            const buttons = document.querySelectorAll('.choice-btn');
            const soundButtons = document.querySelectorAll('.choice-sound-btn');
            
            buttons.forEach((btn, index) => {
                btn.textContent = choices[index];
                btn.className = 'choice-btn flex-1 bg-white border-2 border-gray-300 text-gray-800 font-bold py-4 px-6 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all duration-200';
                btn.onclick = () => selectChoice(index);
            });
            
            // è¨­ç½®ç™¼éŸ³æŒ‰éˆ•çš„é¡¯ç¤ºç‹€æ…‹
            soundButtons.forEach((btn, index) => {
                // åœ¨éšæ®µä¸€å’Œéšæ®µäºŒéƒ½é¡¯ç¤ºç™¼éŸ³æŒ‰éˆ•
                if (currentStage === 1 || currentStage === 2) {
                    btn.style.display = 'block';
                } else {
                    btn.style.display = 'none';
                }
            });
        }

        // ç”Ÿæˆé¸æ“‡é¡Œé¸é …
        function generateChoices(correctAnswer, type) {
            const choices = [correctAnswer];
            const otherWords = vocabulary.filter(word => 
                type === 'chinese' ? word.chinese !== correctAnswer : word.english !== correctAnswer
            );
            
            while (choices.length < 4) {
                const randomWord = otherWords[Math.floor(Math.random() * otherWords.length)];
                const option = type === 'chinese' ? randomWord.chinese : randomWord.english;
                if (!choices.includes(option)) {
                    choices.push(option);
                }
            }
            
            return choices.sort(() => Math.random() - 0.5);
        }

        // é¸æ“‡ç­”æ¡ˆ
        function selectChoice(index) {
            const question = questions[currentQuestion];
            const selectedBtn = document.querySelectorAll('.choice-btn')[index];
            const selectedAnswer = selectedBtn.textContent;
            
            let correctAnswer;
            if (currentStage === 1) {
                correctAnswer = question.chinese;
            } else {
                correctAnswer = question.english;
            }
            
            const buttons = document.querySelectorAll('.choice-btn');
            buttons.forEach(btn => {
                btn.onclick = null;
                if (btn.textContent === correctAnswer) {
                    btn.className = 'choice-btn flex-1 bg-green-500 border-2 border-green-500 text-white font-bold py-4 px-6 rounded-xl';
                } else if (btn === selectedBtn && selectedAnswer !== correctAnswer) {
                    btn.className = 'choice-btn flex-1 bg-red-500 border-2 border-red-500 text-white font-bold py-4 px-6 rounded-xl';
                }
            });
            
            if (selectedAnswer === correctAnswer) {
                // åªæœ‰ç¬¬ä¸€æ¬¡ç­”å°æ‰è¨ˆåˆ†
                if (!questionAnswered[currentQuestion]) {
                    score++;
                    stageScores[`stage${currentStage}`]++;
                }
                document.getElementById('feedback').innerHTML = '<span class="text-green-600">âœ… ç­”å°äº†ï¼</span>';
                selectedBtn.classList.add('bounce');
            } else {
                document.getElementById('feedback').innerHTML = '<span class="text-red-600">âŒ ç­”éŒ¯äº†ï¼</span>';
                selectedBtn.classList.add('shake');
            }
            
            // æ¨™è¨˜é€™é¡Œå·²ç¶“ç­”é
            questionAnswered[currentQuestion] = true;
            
            // æ›´æ–°æ­£ç¢ºç‡é¡¯ç¤º
            updateAccuracyDisplay();
            
            document.getElementById('nextBtn').classList.remove('hidden');
        }

        // æª¢æŸ¥æ‹¼å­—
        function checkSpelling() {
            const userAnswer = currentAnswer.join('').toLowerCase();
            const correctAnswer = questions[currentQuestion].english.toLowerCase();
            
            const answerArea = document.getElementById('answerArea');
            
            if (userAnswer === correctAnswer) {
                // åªæœ‰ç¬¬ä¸€æ¬¡ç­”å°æ‰è¨ˆåˆ†
                if (!questionAnswered[currentQuestion]) {
                    score++;
                    stageScores[`stage${currentStage}`]++;
                }
                document.getElementById('feedback').innerHTML = '<span class="text-green-600">âœ… æ‹¼å­—æ­£ç¢ºï¼</span>';
                answerArea.className = 'min-h-16 bg-green-50 border-2 border-green-500 rounded-xl p-4 mb-4 flex items-center justify-center gap-2 flex-wrap';
            } else {
                document.getElementById('feedback').innerHTML = `<span class="text-red-600">âŒ ç­”éŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${questions[currentQuestion].english}</span>`;
                answerArea.className = 'min-h-16 bg-red-50 border-2 border-red-500 rounded-xl p-4 mb-4 flex items-center justify-center gap-2 flex-wrap';
            }
            
            // æ¨™è¨˜é€™é¡Œå·²ç¶“ç­”é
            questionAnswered[currentQuestion] = true;
            
            // æ›´æ–°æ­£ç¢ºç‡é¡¯ç¤º
            updateAccuracyDisplay();
            
            document.getElementById('nextBtn').classList.remove('hidden');
        }

        // ä¸‹ä¸€é¡Œ
        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < totalQuestions) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // é¡¯ç¤ºçµæœ
        function showResult() {
            // æ›´æ–°çµ±è¨ˆ - åªæœ‰å®Œæˆå…¨éƒ¨15é¡Œæ‰ç®—å®Œæˆ
            gameStats.stage1++;
            gameStats.stage2++;
            gameStats.stage3++;
            localStorage.setItem('stage1Stats', gameStats.stage1);
            localStorage.setItem('stage2Stats', gameStats.stage2);
            localStorage.setItem('stage3Stats', gameStats.stage3);
            
            hideAllScreens();
            document.getElementById('resultArea').classList.remove('hidden');
            
            // è¨ˆç®—æ­£ç¢ºç‡
            const accuracy = Math.round((score / totalQuestions) * 100);
            
            // æ›´æ–°çµæœé¡¯ç¤º
            document.getElementById('finalScore').textContent = `${score}/${totalQuestions}`;
            document.getElementById('accuracyRate').textContent = `${accuracy}%`;
            document.getElementById('stage1Result').textContent = `${stageScores.stage1}/5`;
            document.getElementById('stage2Result').textContent = `${stageScores.stage2}/5`;
            document.getElementById('stage3Result').textContent = `${stageScores.stage3}/5`;
            
            // æ ¹æ“šæ­£ç¢ºç‡é¡¯ç¤ºä¸åŒçš„è¨Šæ¯å’Œè¡¨æƒ…
            let message, emoji;
            if (accuracy >= 90) {
                message = 'å¤ªæ£’äº†ï¼å¹¾ä¹å…¨éƒ¨ç­”å°ï¼';
                emoji = 'ğŸ‰';
            } else if (accuracy >= 80) {
                message = 'å¾ˆå¥½ï¼è¡¨ç¾å„ªç§€ï¼';
                emoji = 'ğŸ‘';
            } else if (accuracy >= 70) {
                message = 'ä¸éŒ¯ï¼ç¹¼çºŒåŠ æ²¹ï¼';
                emoji = 'ğŸ‘';
            } else if (accuracy >= 60) {
                message = 'é‚„å¯ä»¥ï¼Œå¤šç·´ç¿’æœƒæ›´å¥½ï¼';
                emoji = 'ğŸ’ª';
            } else {
                message = 'éœ€è¦å¤šåŠ ç·´ç¿’å–”ï¼';
                emoji = 'ğŸ“š';
            }
            
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('resultEmoji').textContent = emoji;
        }

        // éš±è—æ‰€æœ‰ç•«é¢
        function hideAllScreens() {
            const screens = ['mainMenu', 'teacherLogin', 'teacherPanel', 'gameIntro', 'gameArea', 'resultArea'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
        }

        // èªéŸ³ç™¼éŸ³åŠŸèƒ½
        function speakWord(word) {
            if ('speechSynthesis' in window) {
                // åœæ­¢ä»»ä½•æ­£åœ¨æ’­æ”¾çš„èªéŸ³
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                speechSynthesis.speak(utterance);
            } else {
                // å¦‚æœç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åˆæˆï¼Œé¡¯ç¤ºæç¤º
                const feedback = document.createElement('div');
                feedback.className = 'fixed top-4 right-4 bg-yellow-500 text-white px-4 py-2 rounded-lg z-50';
                feedback.textContent = 'æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åŠŸèƒ½';
                document.body.appendChild(feedback);
                
                setTimeout(() => {
                    document.body.removeChild(feedback);
                }, 3000);
            }
        }

        // ç™¼éŸ³ç•¶å‰é¡Œç›®å–®å­—
        function speakCurrentWord() {
            const question = questions[currentQuestion];
            if (currentStage === 1 || currentStage === 3) {
                // éšæ®µä¸€å’Œä¸‰ï¼šç™¼éŸ³è‹±æ–‡å–®å­—
                speakWord(question.english);
            } else {
                // éšæ®µäºŒï¼šç™¼éŸ³è‹±æ–‡å–®å­—ï¼ˆé›–ç„¶é¡Œç›®é¡¯ç¤ºä¸­æ–‡ï¼‰
                speakWord(question.english);
            }
        }

        // ç™¼éŸ³é¸é …å–®å­—
        function speakChoiceWord(index) {
            const question = questions[currentQuestion];
            
            if (currentStage === 1) {
                // éšæ®µä¸€ï¼šä¸­æ–‡é¸é …å°æ‡‰çš„è‹±æ–‡ç™¼éŸ³
                const chineseChoice = currentChoices[index];
                const englishWord = vocabulary.find(word => word.chinese === chineseChoice);
                if (englishWord) {
                    speakWord(englishWord.english);
                }
            } else if (currentStage === 2 && currentChoices[index]) {
                // éšæ®µäºŒï¼šç›´æ¥ç™¼éŸ³è‹±æ–‡é¸é …
                speakWord(currentChoices[index]);
            }
        }

        // è¨­ç½®æ‹¼å­—å¡ç‰‡
        function setupSpellingCards(word) {
            currentAnswer = [];
            const answerArea = document.getElementById('answerArea');
            const letterCards = document.getElementById('letterCards');
            
            // æ¸…ç©ºå€åŸŸ
            answerArea.innerHTML = '<div class="text-gray-400">å°‡å­—æ¯å¡ç‰‡æ‹–æ‹‰åˆ°é€™è£¡</div>';
            letterCards.innerHTML = '';
            
            // é¡¯ç¤ºå­—æ¯æ•¸é‡æç¤º
            document.getElementById('letterCount').textContent = word.length;
            // åˆå§‹åŒ–å·²é¸å­—æ¯è¨ˆæ•¸
            document.getElementById('selectedCount').textContent = '0';
            
            // ç”Ÿæˆå­—æ¯å¡ç‰‡ï¼ˆåŒ…å«æ­£ç¢ºç­”æ¡ˆçš„å­—æ¯å’Œä¸€äº›å¹²æ“¾å­—æ¯ï¼‰
            const correctLetters = word.toLowerCase().split('');
            const distractorLetters = ['a', 'e', 'i', 'o', 'u', 'r', 's', 't', 'n', 'l'];
            
            // åˆä½µå­—æ¯ä¸¦æ‰“äº‚
            const allLetters = [...correctLetters];
            
            // æ·»åŠ ä¸€äº›å¹²æ“¾å­—æ¯ï¼ˆä½†ä¸è¦å¤ªå¤šï¼‰
            const numDistractors = Math.min(3, Math.max(1, Math.floor(correctLetters.length / 2)));
            for (let i = 0; i < numDistractors; i++) {
                const randomLetter = distractorLetters[Math.floor(Math.random() * distractorLetters.length)];
                if (!allLetters.includes(randomLetter)) {
                    allLetters.push(randomLetter);
                }
            }
            
            // æ‰“äº‚å­—æ¯é †åº
            allLetters.sort(() => Math.random() - 0.5);
            
            // å‰µå»ºå­—æ¯å¡ç‰‡
            allLetters.forEach((letter, index) => {
                const card = document.createElement('div');
                card.className = 'letter-card bg-blue-500 text-white font-bold px-4 py-2 rounded-lg shadow-md cursor-pointer';
                card.textContent = letter;
                card.draggable = true;
                card.dataset.letter = letter;
                card.dataset.cardId = index;
                
                // æ‹–æ‹‰äº‹ä»¶
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
                
                // é»æ“Šäº‹ä»¶ - è‡ªå‹•ç§»å‹•åˆ°ç­”æ¡ˆå€
                card.addEventListener('click', () => {
                    const letter = card.dataset.letter;
                    currentAnswer.push(letter);
                    card.remove();
                    updateAnswerArea();
                });
                
                letterCards.appendChild(card);
            });
            
            // è¨­ç½®ç­”æ¡ˆå€åŸŸçš„æ‹–æ”¾äº‹ä»¶
            answerArea.addEventListener('dragover', handleDragOver);
            answerArea.addEventListener('drop', handleDrop);
        }

        // æ‹–æ‹‰é–‹å§‹
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.cardId);
            e.target.classList.add('dragging');
        }

        // æ‹–æ‹‰çµæŸ
        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        // æ‹–æ‹‰ç¶“é
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drop-zone');
        }

        // æ”¾ä¸‹
        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drop-zone');
            
            const cardId = e.dataTransfer.getData('text/plain');
            const draggedCard = document.querySelector(`[data-card-id="${cardId}"]`);
            
            if (draggedCard) {
                const letter = draggedCard.dataset.letter;
                currentAnswer.push(letter);
                
                // ç§»é™¤åŸå¡ç‰‡
                draggedCard.remove();
                
                // æ›´æ–°ç­”æ¡ˆå€åŸŸé¡¯ç¤º
                updateAnswerArea();
            }
        }

        // æ›´æ–°ç­”æ¡ˆå€åŸŸé¡¯ç¤º
        function updateAnswerArea() {
            const answerArea = document.getElementById('answerArea');
            
            if (currentAnswer.length === 0) {
                answerArea.innerHTML = '<div class="text-gray-400">å°‡å­—æ¯å¡ç‰‡æ‹–æ‹‰åˆ°é€™è£¡</div>';
            } else {
                answerArea.innerHTML = currentAnswer.map((letter, index) => 
                    `<div class="answer-slot bg-blue-100 border-2 border-blue-300 rounded-lg px-3 py-2 font-bold text-blue-800 cursor-pointer" onclick="removeLetter(${index})">${letter}</div>`
                ).join('');
            }
            
            // æ›´æ–°å·²é¸å­—æ¯è¨ˆæ•¸
            document.getElementById('selectedCount').textContent = currentAnswer.length;
        }

        // ç§»é™¤å­—æ¯
        function removeLetter(index) {
            const removedLetter = currentAnswer.splice(index, 1)[0];
            
            // é‡æ–°å‰µå»ºå­—æ¯å¡ç‰‡
            const letterCards = document.getElementById('letterCards');
            const card = document.createElement('div');
            card.className = 'letter-card bg-blue-500 text-white font-bold px-4 py-2 rounded-lg shadow-md cursor-pointer';
            card.textContent = removedLetter;
            card.draggable = true;
            card.dataset.letter = removedLetter;
            card.dataset.cardId = Date.now(); // ä½¿ç”¨æ™‚é–“æˆ³ä½œç‚ºå”¯ä¸€ID
            
            card.addEventListener('dragstart', handleDragStart);
            card.addEventListener('dragend', handleDragEnd);
            
            // é»æ“Šäº‹ä»¶ - è‡ªå‹•ç§»å‹•åˆ°ç­”æ¡ˆå€
            card.addEventListener('click', () => {
                const letter = card.dataset.letter;
                currentAnswer.push(letter);
                card.remove();
                updateAnswerArea();
            });
            
            letterCards.appendChild(card);
            
            // æ›´æ–°ç­”æ¡ˆå€åŸŸ
            updateAnswerArea();
        }

        // æ¸…é™¤ç­”æ¡ˆ
        function clearAnswer() {
            // å°‡æ‰€æœ‰ç­”æ¡ˆå­—æ¯é‡æ–°æ”¾å›å­—æ¯å¡ç‰‡å€åŸŸ
            const letterCards = document.getElementById('letterCards');
            
            currentAnswer.forEach(letter => {
                const card = document.createElement('div');
                card.className = 'letter-card bg-blue-500 text-white font-bold px-4 py-2 rounded-lg shadow-md cursor-pointer';
                card.textContent = letter;
                card.draggable = true;
                card.dataset.letter = letter;
                card.dataset.cardId = Date.now() + Math.random(); // ä½¿ç”¨æ™‚é–“æˆ³+éš¨æ©Ÿæ•¸ä½œç‚ºå”¯ä¸€ID
                
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
                
                // é»æ“Šäº‹ä»¶ - è‡ªå‹•ç§»å‹•åˆ°ç­”æ¡ˆå€
                card.addEventListener('click', () => {
                    const letter = card.dataset.letter;
                    currentAnswer.push(letter);
                    card.remove();
                    updateAnswerArea();
                });
                
                letterCards.appendChild(card);
            });
            
            currentAnswer = [];
            updateAnswerArea();
            
            // é‡ç½®ç­”æ¡ˆå€åŸŸæ¨£å¼
            const answerArea = document.getElementById('answerArea');
            answerArea.className = 'min-h-16 bg-white border-2 border-dashed border-gray-300 rounded-xl p-4 mb-4 flex items-center justify-center gap-2 flex-wrap';
        }

        // æ›´æ–°æ­£ç¢ºç‡é¡¯ç¤º
        function updateAccuracyDisplay() {
            const currentAccuracy = Math.round((score / (currentQuestion + 1)) * 100);
            document.getElementById('currentAccuracy').textContent = currentAccuracy + '%';
        }

        // éµç›¤äº‹ä»¶ç›£è½
        document.addEventListener('keydown', function(event) {
            // ç©ºç™½éµå¿«æ·éµ
            if (event.code === 'Space') {
                event.preventDefault(); // é˜²æ­¢é é¢æ»¾å‹•
                
                // æª¢æŸ¥æ˜¯å¦åœ¨éŠæˆ²é€²è¡Œä¸­ä¸”ä¸‹ä¸€é¡ŒæŒ‰éˆ•å¯è¦‹
                const nextBtn = document.getElementById('nextBtn');
                const gameArea = document.getElementById('gameArea');
                
                if (!gameArea.classList.contains('hidden') && !nextBtn.classList.contains('hidden')) {
                    nextQuestion();
                }
            }
        });

        // åˆå§‹åŒ–éŠæˆ²
        init();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98ec9a5ec2198412',t:'MTc2MDUwMjg1NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
